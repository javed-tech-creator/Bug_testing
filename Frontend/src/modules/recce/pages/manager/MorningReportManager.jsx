import React, { useState } from "react";
import {
  ChevronDown,
  ChevronUp,
  Download,
} from "lucide-react";
import PageHeader from "../../../../components/PageHeader";

const fmt = (n) =>
  typeof n === "number"
    ? new Intl.NumberFormat("en-IN", { style: "currency", currency: "INR" }).format(n)
    : n;

// Mock team planning data for morning report
const teamPlanData = [
  {
    id: 1,
    teamName: "Recce Team A",
    plannedSites: 5,
    plannedArea: 150000,
    estimatedPhotos: 50,
    estimatedMeasurements: 45,
    estimatedDocs: 40,
  },
  {
    id: 2,
    teamName: "Recce Team B",
    plannedSites: 4,
    plannedArea: 95000,
    estimatedPhotos: 35,
    estimatedMeasurements: 32,
    estimatedDocs: 30,
  },
  {
    id: 3,
    teamName: "Recce Team C",
    plannedSites: 6,
    plannedArea: 200000,
    estimatedPhotos: 65,
    estimatedMeasurements: 60,
    estimatedDocs: 55,\n  },\n];\n\nconst MorningReportManager = () => {\n  const [expandedTeam, setExpandedTeam] = useState(null);\n\n  const toggleTeamExpand = (id) => {\n    setExpandedTeam(expandedTeam === id ? null : id);\n  };\n\n  // Calculate totals\n  const totalPlannedSites = teamPlanData.reduce((sum, t) => sum + t.plannedSites, 0);\n  const totalPlannedArea = teamPlanData.reduce((sum, t) => sum + t.plannedArea, 0);\n  const totalEstPhotos = teamPlanData.reduce((sum, t) => sum + t.estimatedPhotos, 0);\n  const totalEstMeasurements = teamPlanData.reduce((sum, t) => sum + t.estimatedMeasurements, 0);\n  const totalEstDocs = teamPlanData.reduce((sum, t) => sum + t.estimatedDocs, 0);\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      <PageHeader title=\"Morning Plan - Manager View\" />\n\n      {/* Dashboard Header */}\n      <div className=\"bg-white border border-gray-200 rounded-md p-4 mb-6\">\n        <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n          <div className=\"flex flex-col items-center\">\n            <div className=\"text-2xl font-bold text-gray-900\">{teamPlanData.length}</div>\n            <div className=\"text-xs text-gray-500 uppercase tracking-wide\">Teams</div>\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <div className=\"text-2xl font-bold text-blue-600\">{totalPlannedSites}</div>\n            <div className=\"text-xs text-gray-500 uppercase tracking-wide\">Planned Sites</div>\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <div className=\"text-2xl font-bold text-green-600\">{fmt(totalPlannedArea)} sq.ft</div>\n            <div className=\"text-xs text-gray-500 uppercase tracking-wide\">Total Area</div>\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <div className=\"text-2xl font-bold text-purple-600\">{totalEstPhotos}</div>\n            <div className=\"text-xs text-gray-500 uppercase tracking-wide\">Est. Photos</div>\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <div className=\"text-2xl font-bold text-indigo-600\">{totalEstMeasurements}</div>\n            <div className=\"text-xs text-gray-500 uppercase tracking-wide\">Est. Measurements</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Team Plans */}\n      <div className=\"space-y-4\">\n        {teamPlanData.map((team) => (\n          <div key={team.id} className=\"border border-gray-200 bg-white rounded-md p-4 hover:border-gray-300\">\n            {/* Team Header */}\n            <div\n              className=\"flex justify-between items-center cursor-pointer\"\n              onClick={() => toggleTeamExpand(team.id)}\n            >\n              <div className=\"flex-1\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">{team.teamName}</h3>\n              </div>\n              <div className=\"flex items-center gap-6 mr-4\">\n                <div className=\"text-right\">\n                  <div className=\"text-sm font-bold text-blue-600\">{team.plannedSites}</div>\n                  <div className=\"text-xs text-gray-500\">Sites</div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-sm font-bold text-green-600\">{fmt(team.plannedArea)} sq.ft</div>\n                  <div className=\"text-xs text-gray-500\">Area</div>\n                </div>\n              </div>\n              <button className=\"p-2 hover:bg-gray-100 rounded\">\n                {expandedTeam === team.id ? (\n                  <ChevronUp className=\"w-5 h-5\" />\n                ) : (\n                  <ChevronDown className=\"w-5 h-5\" />\n                )}\n              </button>\n            </div>\n\n            {/* Team Plan Details */}\n            {expandedTeam === team.id && (\n              <div className=\"mt-4 pt-4 border-t grid grid-cols-2 md:grid-cols-5 gap-4\">\n                <div>\n                  <div className=\"text-lg font-bold text-gray-900\">{team.plannedSites}</div>\n                  <div className=\"text-xs text-gray-500\">Planned Sites</div>\n                </div>\n                <div>\n                  <div className=\"text-lg font-bold text-gray-900\">{fmt(team.plannedArea)} sq.ft</div>\n                  <div className=\"text-xs text-gray-500\">Planned Area</div>\n                </div>\n                <div>\n                  <div className=\"text-lg font-bold text-gray-900\">{team.estimatedPhotos}</div>\n                  <div className=\"text-xs text-gray-500\">Est. Photos</div>\n                </div>\n                <div>\n                  <div className=\"text-lg font-bold text-gray-900\">{team.estimatedMeasurements}</div>\n                  <div className=\"text-xs text-gray-500\">Est. Measurements</div>\n                </div>\n                <div>\n                  <div className=\"text-lg font-bold text-gray-900\">{team.estimatedDocs}</div>\n                  <div className=\"text-xs text-gray-500\">Est. Documents</div>\n                </div>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Planning Summary Table */}\n      <div className=\"bg-white border border-gray-200 rounded-lg mt-6\">\n        <div className=\"p-4 border-b bg-black rounded-t-lg flex justify-between items-center\">\n          <h3 className=\"text-lg font-semibold text-white\">Team Planning Summary</h3>\n          <button className=\"flex items-center gap-2 px-4 py-2 bg-white text-black rounded hover:bg-gray-100 text-sm\">\n            <Download className=\"w-4 h-4\" />\n            Export\n          </button>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full text-sm\">\n            <thead className=\"bg-gray-100 border-b\">\n              <tr>\n                <th className=\"border px-4 py-3 text-left font-semibold\">Team Name</th>\n                <th className=\"border px-4 py-3 text-center font-semibold\">Planned Sites</th>\n                <th className=\"border px-4 py-3 text-center font-semibold\">Planned Area</th>\n                <th className=\"border px-4 py-3 text-center font-semibold\">Est. Photos</th>\n                <th className=\"border px-4 py-3 text-center font-semibold\">Est. Measurements</th>\n                <th className=\"border px-4 py-3 text-center font-semibold\">Est. Documents</th>\n              </tr>\n            </thead>\n            <tbody>\n              {teamPlanData.map((team) => (\n                <tr key={team.id} className=\"hover:bg-gray-50 border-b\">\n                  <td className=\"border px-4 py-3 font-medium\">{team.teamName}</td>\n                  <td className=\"border px-4 py-3 text-center\">{team.plannedSites}</td>\n                  <td className=\"border px-4 py-3 text-center\">{fmt(team.plannedArea)} sq.ft</td>\n                  <td className=\"border px-4 py-3 text-center\">{team.estimatedPhotos}</td>\n                  <td className=\"border px-4 py-3 text-center\">{team.estimatedMeasurements}</td>\n                  <td className=\"border px-4 py-3 text-center\">{team.estimatedDocs}</td>\n                </tr>\n              ))}\n              <tr className=\"bg-gray-100 font-semibold border-b\">\n                <td className=\"border px-4 py-3\">TOTAL</td>\n                <td className=\"border px-4 py-3 text-center\">{totalPlannedSites}</td>\n                <td className=\"border px-4 py-3 text-center\">{fmt(totalPlannedArea)} sq.ft</td>\n                <td className=\"border px-4 py-3 text-center\">{totalEstPhotos}</td>\n                <td className=\"border px-4 py-3 text-center\">{totalEstMeasurements}</td>\n                <td className=\"border px-4 py-3 text-center\">{totalEstDocs}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MorningReportManager;
